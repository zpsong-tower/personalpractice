# 网络请求

**TCP / IP 四层：**

HTTP - 应用层
*(TSL/SSL - 安全层)*
TCP - 传输层
IP -  网络层
网络接口 - 数据链路层

**HTTPS加密过程：**

非对称加密：公钥加密，私钥解密

1. **客户端**给出协议版本号、支持的加密方法、一个客户端生成的随机数①
2. **服务端**确认双方使用的加密方法，并给出数字证书、一个服务端生成的随机数②
3. **客户端**确认数字证书有效，生成一个新的随机数③，并使用数字证书中的公钥，加密这个数，发给服务端
4. **服务端**使用自己的私钥，获取随机数③
5. **客户端**和**服务端**根据约定的加密方法，使用前面的三个随机数，生成“对话秘钥”，用来加密接下来的整个对话过程

**HTTP和HTTPS区别：**

- HTTPS需要CA证书，需要一定的费用
- HTTP采用超文本协议，一般使用明文传递，HTTPS有安全协议SSL加密传输协议
- 采用的端口不一样：HTTP为80，HTTPS为443
- HTTP是无状态的，HTTPS+SSL对信息进行加密，身份验证更加安全
- HTTP建立连接的速度比HTTPS要快，因为HTTPS除了三次握手还需要SSL握手

**TCP为什么是三次握手而不是两次：**

- 主要是防止已过期的连接再次传到被连接的主机。
- 第一次握手中客户端发送的报文可能过了很久才到达服务器端，此时客户端已经不需要连接了，如果服务端建立了连接，就会造成服务端资源的浪费。

**TCP关闭连接为什么是四次挥手：**

- 由于TCP连接是全双工的，每个方向都必须单独进行关闭。
- 三次握手时，应答报文和同步报文是在第二次握手时，由服务端一起发送给客户端的。
- 四次挥手时，服务端收到客户端终止发送的报文，先发送一个应答报文确认收到，防止客户端重复发送终止报文，服务端此时未必全部数据都发送给客户端了，所以可能不能立即发送同步报文。
