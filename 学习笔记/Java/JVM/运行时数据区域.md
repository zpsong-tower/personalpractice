## 运行时数据区域概述

**程序计数器**

一块较小的内存区域，当前线程

字节码解释器工作时通过改变该计数器的值来选取下一条需要执行的字节码指令

各线程间计数器互不影响，这类内存区域线程私有

**Java虚拟机栈**

线程私有，生命周期与线程相同

每个方法被执行时，Java虚拟机都会同步创建一个栈帧用于存储局部变量表、操作数栈、动态连接、方法返回地址等信息

每一个方法被调用直至执行完毕对应着一个栈帧在虚拟机栈中从入站到出栈的过程

虚拟机栈中局部变量表部分常被称作栈内存，存放了编译期可知的各种基本数据类型、对象引用和returnAddress类型

局部变量表所需的内存空间在编译期间完成分配，进入一个方法时，这个方法需要在栈帧中分配多大的局部变量空间是完全确定的

**本地方法栈**

虚拟机栈为执行Java方法服务，本地方法栈则是为本体Native方法服务

**Java堆**

虚拟机管理的内存中最大的一块，被所有线程共享的一块内存区域，在虚拟机启动时创建

所有的对象实例以及数组都应当在堆上分配（随着Java的发展而言并不绝对）

Java堆是垃圾收集器管理的内存区域

Java堆存储的只能是对象的实例，将Java堆细分出多个线程私有的分配缓冲区，目的只是为了更好或更快地回收内存

Java堆可以处于物理上不连续的存储空间中，但在逻辑上它应该被视为连续的

当前主流的Java虚拟机都按照可扩展来实现（通过 -Xmx 和 -Xms 设定）

**方法区**

被所有线程共享的一块内存区域，用于存储已被虚拟机加载的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据

垃圾收集行为在该区域比较少出现，回收目标主要是针对常量池的回收和对类型的卸载

