### Java

- char

    char用UTF-16存字符最少两个字节

    String.length是char的个数，不是字符的个数，比如emoji占两个char，python高版本对该点有优化

    Java9对字符存储有优化，如果全为英文字符集，会用一个字节来存储

- String

    String存储编译可预见大小的字符串在栈上开辟内存，否则在堆上开辟内存

    - 栈

        class文件指出存储String长度的数值占2个字节，即0~65535，如果存储的字符需要UTF-8编码，编码后的字节数不能超过该值

        javac中对临界值判断有失误 拉丁字符为小于65535，但当存储的字符需要UTF-8时，为小于等于 Kotlin不存在此问题

        String存储长度也受限于运行时方法区的限制

    - 堆

        理论上限为int上限 受虚拟机实现限制可能会小于该值

        内存较小也会受到堆内存的限制

- 匿名内部类

    class中存在名字，以$1 $2等为结尾

    只能继承一个父类或实现一个接口 Kotlin则不是

    构造方法是编译器定义的

    父类是非静态的类型则需要父类外部实例初始化

    非静态作用域定义会引用外部类实例

    只能捕获外部作用域内的final变量

    单一方法的接口可以转换为Lambda表达式

- 方法分派

  - 静态分派 方法重载

      编译期确定
  
      依据调用者的声明类型和方法参数类型
  
  - 动态分派 方法覆写
  
      运行时确定
  
      依据调用者的实际类型分派
  
- 泛型

    采用类型擦除实现

    编译时被擦除为Object，不兼容基本类型

    类型擦除的实现方案主要考虑后向兼容

    泛型类型签名信息特定场景下反射可获取

