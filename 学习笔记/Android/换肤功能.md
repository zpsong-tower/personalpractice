# 换肤功能

|                | 缓存替换                                                     | Resource包装                                                 | AssetManager替换                                             |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **工作机制**   | 修改Resources的字段                                          | 包装Resources拦截资源加载                                    | AssetPath中添加皮肤包                                        |
| **刷新方式**   | 重绘View                                                     | 重绘View                                                     | 若替换布局，需重启Activity                                   |
| **方案优势**   | 支持图片资源<br />支持独立打包动态下发                       | + 支持String / Layout                                        | + 支持style<br />+ 支持assets目录下的文件<br />+ 替换AM实例非常简洁 |
| **存在问题**   | 替换资源受限<br />Hook过程较为繁琐<br />影响资源加载，入侵性较强 | 资源获取效率有影响<br />不支持Style、assets目录<br />Resource需要替换多处<br />Resource包装类代码量大 | 5.0以前不能新增Entry<br />强依赖编译期资源id的一致性处理     |
| **资源重定向** | 无此问题                                                     | 运行时动态映射<br />编译期静态对齐 (可选)                    | 编译期静态对齐                                               |

